import{s as r,a as h,b as L,e as f}from"./common-DKrip_BD.js";const p="https://www.themealdb.com/api/json/v1/1",d=document.getElementById("mealsList"),l=document.getElementById("mealQ"),M=document.getElementById("mealSearch"),b=document.getElementById("mealRandom"),o=document.getElementById("mealMsg"),s=document.getElementById("mealCategory"),c=document.getElementById("mealArea"),y="https://via.placeholder.com/800x450?text=No+image";function C(a){const t=f("div","modal-backdrop"),e=f("div","modal");e.innerHTML=a;const n=f("button","close-btn","✕");n.addEventListener("click",()=>document.body.removeChild(t)),e.appendChild(n),t.appendChild(e),t.addEventListener("click",i=>{i.target===t&&document.body.removeChild(t)}),document.body.appendChild(t)}function k(a){const t=document.createElement("div");t.className="card-item";const e=document.createElement("img");e.className="card-media",e.loading="lazy",e.alt=a.strMeal,e.src=a.strMealThumb||y,L(e,y);const n=document.createElement("div");return n.className="meal-title",n.textContent=a.strMeal,t.appendChild(e),t.appendChild(n),t.addEventListener("click",()=>w(a.idMeal)),t}function v(a){if(d.innerHTML="",!a||a.length===0){r(o,"Nothing found.");return}r(o,""),a.forEach(t=>d.appendChild(k(t)))}async function m(a){d.innerHTML="",r(o,"Loading...");try{const t=`${p}/search.php?s=${encodeURIComponent(a)}`,e=await h(t);v(e.meals||[])}catch(t){r(o,"Error: "+t.message),console.error(t)}}async function I(){d.innerHTML="",r(o,"Loading...");try{const a=await h(`${p}/random.php`);v(a.meals||[])}catch(a){r(o,"Error: "+a.message),console.error(a)}}async function E(){const a=s&&s.value||"",t=c&&c.value||"";if(!a&&!t)return m("");d.innerHTML="",r(o,"Loading...");try{const e=new URLSearchParams;a&&e.set("c",a),t&&e.set("a",t);const n=`${p}/filter.php?${e.toString()}`,i=await h(n);v(i&&i.meals||[])}catch(e){r(o,"Error: "+e.message),console.error(e)}}async function w(a){try{const t=await h(`${p}/lookup.php?i=${a}`),e=t.meals&&t.meals[0];if(!e)return alert("Детали не найдены");let n="";for(let u=1;u<=20;u++){const g=e["strIngredient"+u],$=e["strMeasure"+u];g&&g.trim()&&(n+=`<li>${g} — ${$||""}</li>`)}const i=`
      <h2>${e.strMeal}</h2>
      <img src="${e.strMealThumb||y}" alt="${e.strMeal}" />
      <p><strong>Category:</strong> ${e.strCategory||""} — <strong>Country:</strong> ${e.strArea||""}</p>
      <h3>Ingridients</h3>
      <ul>${n}</ul>
      <h3>Instructions</h3>
      <p style="white-space:pre-wrap">${e.strInstructions||""}</p>
      ${e.strSource?`<p>Source: <a href="${e.strSource}" target="_blank" rel="noopener">${e.strSource}</a></p>`:""}
      ${e.strYoutube?`<p>Video: <a href="${e.strYoutube}" target="_blank" rel="noopener">${e.strYoutube}</a></p>`:""}
    `;C(i)}catch(t){alert("Ошибка: "+t.message)}}M.addEventListener("click",()=>{const a=l.value.trim();if(!a)return m("");m(a)});b.addEventListener("click",I);s&&s.addEventListener("change",()=>{c&&(c.value=""),l&&(l.value=""),E()});c&&c.addEventListener("change",()=>{s&&(s.value=""),l&&(l.value=""),E()});l.addEventListener("keyup",a=>{if(a.key==="Enter"){const t=l.value.trim();t&&(s&&(s.value=""),c&&(c.value="")),m(t)}});m("");
